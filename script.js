// const data = [
//   [{ name: 'affiche processus', format: '1/2' }],
//   [{ name: 'divingWoman', format: '1/2' }],
//   [{ name: 'isolated posters', format: '1/2' }],
//   [{ name: 'couverture mémoire', format: '1/2' }],
//   [{ name: 'bonhomme geometrique', format: '1/2' }],
//   [{ name: 'PFCP', format: '1/2' }],
//   [{ name: 'la danse des oiseaux', format: '1/2' }],
//   [{ name: 'maulevrier', format: '1/2' }],
//   [{ name: 'visage noir et blanc', format: '1/2' }],
//   [{ name: 'olio e burro', format: '1/2' }],
//   [{ name: 'panonica', format: '1/2' }],
//   [{ name: 'fanzine', format: '1/2' }],
//   [{ name: 'savon 1', format: '1/2' }],
//   [{ name: 'oeil', format: '1/2' }],
//   [{ name: 'vélo sport', format: '2/1' }],
//   [{ name: 'workshop typo', format: '2/1' }],
//   [{ name: 'bal des pompiers', format: '2/1' }],
// ]

const data = [
  {
    name: 'Olio e Burro',
    cover: './img/gallery/olio e burro.webp',
    keywords: ['Branding', 'Illustration'],
    challenge:
      "Trouver l'équilibre entre l'aspect artisanal et moderne, tout en transmettant la simplicité et le savoir-faire de leur cuisine avec une identité visuelle élégante et contemporaine pour attirer les clients.",
    solution:
      "Une palette de couleurs naturelles, des illustrations dessinées à la main et des typographies simples mais modernes pour créer une identité visuelle qui reflète parfaitement l'atmosphère chaleureuse et authentique d'Olio e Burro.",
    imgs: [
      './img/Projet 1/olio 1.webp',
      './img/Projet 1/olio 6.webp',
      './img/Projet 1/olio 7.webp',
      './img/Projet 1/olio 5.webp',
      './img/Projet 1/olio 4.webp',
      './img/Projet 1/olio 3.webp',
      './img/Projet 1/olio 2.webp',
    ],
    description:
      "Olio e Burro est un restaurant né de la rencontre d'un français et d'une italienne amoureux de leur culture. Ils proposent une cuisine locale et sans gluten qui valorise la simplicité et le savoir faire. Le couple propose des plats fait maison à partir de produits bruts.  Cette identité est une vitrine de leur singularité : elle traduit un artisanat qui se veut simple mais chaleureux. La conception de cette identité est le fruit de recherches graphiques et plastiques prolifiques autour de la cuisine.",
  },
  {
    name: 'Pannonica',
    cover: './img/Projet 2/Pannonica 1.webp',
    keywords: ['Identité', 'Website'],
    challenge:
      "Une refonte de l'identité visuelle à la fois sobre et élégante, mais également facilement identifiable pour la scène de jazz et de musiques improvisées à Nantes.",
    solution:
      "Créaton d'une maquette web et d'une revue saisonnière pour mettre en valeur l'identité visuelle, en la déclinant sur différents supports pour toucher un public plus large et promouvoir cette scène musicale dynamique et innovante. ",
    imgs: [
      './img/Projet 2/Pannonica 1.webp',
      './img/Projet 2/Pannonica 2.webp',
      './img/Projet 2/Pannonica 3.webp',
    ],
    description:
      "Refonte de l'identité de la scène de jazz et de musiques improvisées à Nantes. L'identité doit être sobre et élégante tout en étant aisément idéntifiable. Le logotype en monochromie est constitué d'une typographie incisive qui réprésente les variations sonores. Maquette web et déclinaisons sur différents supports numériques et pour une revue saisonnière.",
  },
  {
    name: 'Race cars - Location',
    cover: './img/Projet 4/Racecars 1.webp',
    keywords: ['Branding', 'Blabla', 'Test'],
    challenge: 'Va faloir trouver ma petite Isaure',
    solution: 'En deux phrases idéalement, utilise chatGPT si besoin :)',
    imgs: [
      './img/Projet 4/Racecars 1.webp',
      './img/Projet 4/Racecars 2.webp',
      './img/Projet 4/Racecars 3.webp',
      './img/Projet 4/Racecars 4.webp',
    ],
    description: 'Identité graphique pour Race Cars, une entreprise de location de voiture.',
  },
  {
    name: 'Olio e Burro',
    cover: './img/gallery/olio e burro.webp',
    keywords: ['Branding', 'Illustration'],
    challenge:
      "Trouver l'équilibre entre l'aspect artisanal et moderne, tout en transmettant la simplicité et le savoir-faire de leur cuisine avec une identité visuelle élégante et contemporaine pour attirer les clients.",
    solution:
      "Une palette de couleurs naturelles, des illustrations dessinées à la main et des typographies simples mais modernes pour créer une identité visuelle qui reflète parfaitement l'atmosphère chaleureuse et authentique d'Olio e Burro.",
    imgs: [
      './img/Projet 1/olio 1.webp',
      './img/Projet 1/olio 6.webp',
      './img/Projet 1/olio 7.webp',
      './img/Projet 1/olio 5.webp',
      './img/Projet 1/olio 4.webp',
      './img/Projet 1/olio 3.webp',
      './img/Projet 1/olio 2.webp',
    ],
    description:
      "Olio e Burro est un restaurant né de la rencontre d'un français et d'une italienne amoureux de leur culture. Ils proposent une cuisine locale et sans gluten qui valorise la simplicité et le savoir faire. Le couple propose des plats fait maison à partir de produits bruts.  Cette identité est une vitrine de leur singularité : elle traduit un artisanat qui se veut simple mais chaleureux. La conception de cette identité est le fruit de recherches graphiques et plastiques prolifiques autour de la cuisine.",
  },
  {
    name: 'Olio e Burro',
    cover: './img/gallery/olio e burro.webp',
    keywords: ['Branding', 'Illustration'],
    challenge:
      "Trouver l'équilibre entre l'aspect artisanal et moderne, tout en transmettant la simplicité et le savoir-faire de leur cuisine avec une identité visuelle élégante et contemporaine pour attirer les clients.",
    solution:
      "Une palette de couleurs naturelles, des illustrations dessinées à la main et des typographies simples mais modernes pour créer une identité visuelle qui reflète parfaitement l'atmosphère chaleureuse et authentique d'Olio e Burro.",
    imgs: [
      './img/Projet 1/olio 1.webp',
      './img/Projet 1/olio 6.webp',
      './img/Projet 1/olio 7.webp',
      './img/Projet 1/olio 5.webp',
      './img/Projet 1/olio 4.webp',
      './img/Projet 1/olio 3.webp',
      './img/Projet 1/olio 2.webp',
    ],
    description:
      "Olio e Burro est un restaurant né de la rencontre d'un français et d'une italienne amoureux de leur culture. Ils proposent une cuisine locale et sans gluten qui valorise la simplicité et le savoir faire. Le couple propose des plats fait maison à partir de produits bruts.  Cette identité est une vitrine de leur singularité : elle traduit un artisanat qui se veut simple mais chaleureux. La conception de cette identité est le fruit de recherches graphiques et plastiques prolifiques autour de la cuisine.",
  },
]

function buildProjectSection(main, section, project) {
  createProjectName()

  const cover = section.appendChild(document.createElement('img'))
  cover.classList.add('cover')
  cover.src = `${project.cover}`

  const keywords = section.appendChild(document.createElement('div'))
  keywords.classList.add('keywords')
  project.keywords.forEach((keyword) => {
    const h3 = keywords.appendChild(document.createElement('h3'))
    h3.textContent = keyword
  })

  const description = section.appendChild(document.createElement('div'))
  description.classList.add('description')

  description.appendChild(document.createElement('h4')).textContent = 'Le Challenge'
  description.appendChild(document.createElement('p')).textContent = `${project.challenge}`
  description.appendChild(document.createElement('h4')).textContent = 'Ma Solution'
  description.appendChild(document.createElement('p')).textContent = `${project.solution}`

  const button = section.appendChild(document.createElement('a'))
  button.classList.add('discover')
  button.textContent = 'DÉCOUVRIR'

  button.addEventListener('click', () => {
    main.classList.toggle('hidden')
    setTimeout(function () {
      clearContent(section)
      createProjectName()
      createSwiperDiv(section)
      populateSwiperWrapper(project)
      initSwiper()

      const projetDesc = section.appendChild(document.createElement('div'))
      projetDesc.classList.add('description')

      projetDesc.appendChild(document.createElement('h4')).textContent = 'Le Client'

      const projetDescP = projetDesc.appendChild(document.createElement('p'))
      projetDescP.textContent = `${project.description}`

      const retour = section.appendChild(document.createElement('a'))
      retour.textContent = 'RETOUR'
      retour.addEventListener('click', () => {
        main.classList.toggle('hidden')
        setTimeout(function () {
          clearContent(section)
          buildProjectSection(main, section, project)
          setTimeout(() => main.classList.toggle('hidden'), 250)
        }, 500)
      })

      if (window.innerWidth >= 1024) {
        section.lastChild.insertAdjacentElement(
          'afterend',
          document.getElementsByClassName('swiper')[0]
        )
      } else {
        console.log('Screen probably too small')
      }

      setTimeout(() => main.classList.toggle('hidden'), 250)
    }, 500)
  })

  function createProjectName() {
    const infos = section.appendChild(document.createElement('div'))
    infos.classList.add('infos')

    const infosH1 = infos.appendChild(document.createElement('h1'))
    infosH1.textContent = `0${data.indexOf(project) + 1}`

    const infosH2 = infos.appendChild(document.createElement('h2'))
    infosH2.textContent = `${project.name}`
  }

  if (window.innerWidth >= 1024) {
    section.lastChild.insertAdjacentElement('afterend', cover)
  }

  // if (window.innerWidth >= 1024 && main.children.length % 2 == 0) {
  //   section.firstChild.insertAdjacentElement('beforebegin', cover)
  // } else if (window.innerWidth >= 1024 && main.children.length % 2 !== 0) {
  //   section.lastChild.insertAdjacentElement('afterend', cover)
  // } else {
  //   console.log('Screen probably too small')
  // }
}

function projectsBuilding() {
  const main = document.querySelector('main')
  data.forEach((project) => {
    const section = main.appendChild(document.createElement('div'))
    section.classList.add(`project${data.indexOf(project) + 1}`, 'section')
    buildProjectSection(main, section, project)
  })
}
projectsBuilding()

function clearContent(section) {
  while (section.firstChild) {
    section.removeChild(section.lastChild)
  }
}

function createSwiperDiv(section) {
  const swiperDiv = section.appendChild(document.createElement('div'))
  swiperDiv.classList.add('swiper')

  const swiperWrapper = swiperDiv.appendChild(document.createElement('div'))
  swiperWrapper.classList.add('swiper-wrapper')

  const swiperNavPrev = swiperDiv.appendChild(document.createElement('div'))
  swiperNavPrev.classList.add('swiper-button-prev')

  const swiperNavNext = swiperDiv.appendChild(document.createElement('div'))
  swiperNavNext.classList.add('swiper-button-next')

  const swiperPagination = swiperDiv.appendChild(document.createElement('div'))
  swiperPagination.classList.add('swiper-pagination')

  return swiperDiv
}

function populateSwiperWrapper(project) {
  const entries = Array.from(project.imgs)

  entries.forEach((entry) => {
    const swiperSlide = document
      .querySelector('.swiper-wrapper')
      .appendChild(document.createElement('div'))
    swiperSlide.classList.add('swiper-slide')

    const swiperIMG = swiperSlide.appendChild(document.createElement('img'))
    swiperIMG.src = `${entry}`
  })
}

function initSwiper() {
  return new Swiper('.swiper', {
    slidesPerView: 'auto',
    centeredSlides: true,
    // spaceBetween: 30,
    grabCursor: true,
    freeMode: {
      enabled: true,
      sticky: true,
    },
    keyboard: {
      enabled: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
  })
}
